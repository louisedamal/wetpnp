<% content_for :navbar_class, "navbar-wagon-white-fix" %>
<div class="container">
  <div class="container-booking">
    <h1>Mes réservations en cours et à venir</h1>
    <div class="tabs">
      <a href="#" class="tab active">En tant que swimmer</a>
      <a href="#" class="tab">En tant que propriétaire</a>
    </div>
  <ul class="bookings">

    <% @bookings_as_swimmer.each do |booking| %>
      <li class="booking">
        <div class="booking-status">
          <p><%= booking.status %><br><%= booking.pool.price %> €</p>
        </div>
        <div class="booking-title">
          <h5><%= link_to "#{booking.pool.title}", pool_path(booking.pool) %></h5>
        </div>
        <% if policy(Review).create? && booking.status == "Acceptée" %>
          <div class="booking-review">
            <%= link_to "Donner mon avis", new_pool_review_path(booking.pool), class:"btn btn-review", method: :get %>
          </div>
        <% end %>
        <div class="booking-messages">
          <p><%= link_to '<i class="fas fa-envelope"></i>'.html_safe, booking_messages_path(booking) %></p>
        </div>
        <div class="booking-delete">
          <%= link_to '<i class="fas fa-times-circle"></i>'.html_safe, booking_path(booking), method: :delete, data: {confirm: "Êtes-vous sûr ?"} %>
        </div>
      </li>
    <% end %>
  </ul>
  <ul class="bookings hidden">
    <% @bookings_as_owner.each do |booking| %>
      <li class="booking">
        <div class="booking-status">
          <p><%= booking.status %><br><%= booking.pool.price %> €</p>
        </div>
        <div class="booking-title">
          <h5><%= link_to "#{booking.pool.title}", pool_path(booking.pool) %></h5>
        </div>
        <div class="booking-messages">
          <p><%= link_to '<i class="fas fa-envelope"></i>'.html_safe, booking_messages_path(booking) %></p>
        </div>
        <% if policy(Booking).create? %>
          <% if booking.status == "En attente" %>
            <div class="booking-accept">
              <%= link_to '<i class="fas fa-check-circle"></i>'.html_safe, booking_path(booking), method: :put %>
            </div>
            <div class="booking-delete">
              <%= link_to '<i class="fas fa-times-circle"></i>'.html_safe, booking_path(booking), method: :delete, data: {confirm: "Êtes-vous sûr ?"} %>
            </div>
            <% else %>
            <div class="booking-delete">
              <%= link_to '<i class="fas fa-times-circle"></i>'.html_safe, booking_path(booking), method: :delete, data: {confirm: "Êtes-vous sûr ?"} %>
            </div>
          <% end %>
        <% end %>
      </li>
    <% end %>
  </ul>
</div>


